DELIMITER $$
DROP PROCEDURE IF EXISTS AddColumn $$
CREATE PROCEDURE AddColumn()
BEGIN
    IF NOT EXISTS((SELECT * FROM information_schema.COLUMNS WHERE TABLE_SCHEMA=DATABASE() AND COLUMN_NAME='MinPatch' AND TABLE_NAME='disables')) THEN
        ALTER TABLE `disables`
            ADD COLUMN `MinPatch` INT UNSIGNED NOT NULL DEFAULT '0' AFTER `comment`,
            ADD COLUMN `MaxPatch` INT UNSIGNED NOT NULL DEFAULT '21' AFTER `MinPatch`,
            DROP PRIMARY KEY,
            ADD PRIMARY KEY (`sourceType`, `entry`, `MinPatch`, `MaxPatch`) USING BTREE;
    END IF;
END $$
CALL AddColumn()
$$
DELIMITER ;
DROP PROCEDURE IF EXISTS AddColumn;

DELETE FROM `disables` WHERE `sourceType`=1 AND `entry` IN (550, 3631, 4487, 4488, 4489, 4490, 6145, 6521, 6522);
DELETE FROM `disables` WHERE `sourceType`=2 AND `entry` IN (269, 309, 349, 429, 469, 509, 531, 532, 533, 534, 540, 542, 543, 544, 545, 546, 547, 548, 550, 552, 553, 554, 555, 556, 557, 558, 560, 564, 565, 568, 574, 575, 576, 578, 580, 585, 595, 599, 600, 601, 602, 603, 604, 608, 615, 616, 619, 624, 631, 632, 649, 650, 658, 668, 724);
DELETE FROM `disables` WHERE `sourceType`=3 AND `entry` IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 30, 32);
DELETE FROM `disables` WHERE `sourceType`=5 AND `entry` IN (1, 2, 3, 4, 5, 6, 7);
DELETE FROM `disables` WHERE `sourceType`=9 AND `entry` IN (1, 2, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 23, 24, 26, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 70, 71, 76, 77, 90, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115);
INSERT INTO `disables` (`sourceType`, `entry`, `flags`, `params_0`, `params_1`, `comment`, `MinPatch`, `MaxPatch`) VALUES
(1, 550, 0, '', '', 'Deprecated quest: Battle of Hillsbrad', 20, 21),
(1, 3631, 0, '', '', 'Deprecated quest: Summon Felsteed', 17, 21),
(1, 4487, 0, '', '', 'Deprecated quest: Summon Felsteed', 17, 21),
(1, 4488, 0, '', '', 'Deprecated quest: Summon Felsteed', 17, 21),
(1, 4489, 0, '', '', 'Deprecated quest: Summon Felsteed', 17, 21),
(1, 4490, 0, '', '', 'Deprecated quest: Summon Felsteed', 17, 21),
(1, 6145, 0, '', '', 'Disable Quest The Crimson Courier', 20, 21),
(1, 6521, 0, '0', '0', 'Deprecated quest: An Unholy Alliance', 20, 21),
(1, 6522, 0, '0', '0', 'Deprecated quest: An Unholy Alliance', 20, 21),
(2, 269, 3, '', '', 'The Black Morass', 0, 11),
(2, 309, 1, '', '', 'Zul\'Gurub', 0, 5),
(2, 349, 1, '', '', 'Maraudon', 0, 0),
(2, 429, 1, '', '', 'Dire Maul', 0, 1),
(2, 469, 1, '', '', 'Blackwing Lair', 0, 4),
(2, 509, 1, '', '', 'Ruins of AhnQiraj', 0, 7),
(2, 531, 1, '', '', 'Temple of AhnQiraj', 0, 7),
(2, 532, 1, '', '', 'Karazhan', 0, 11),
(2, 533, 3, '', '', 'Naxxramas', 0, 16),
(2, 534, 1, '', '', 'Hyjal Summit', 0, 11),
(2, 540, 3, '', '', 'The Shattered Halls', 0, 11),
(2, 542, 3, '', '', 'The Blood Furnace', 0, 11),
(2, 543, 3, '', '', 'Hellfire Ramparts', 0, 11),
(2, 544, 1, '', '', 'Magtheridon\'s Lair', 0, 11),
(2, 545, 3, '', '', 'The Steamvault', 0, 11),
(2, 546, 3, '', '', 'The Underbog', 0, 11),
(2, 547, 3, '', '', 'The Slave Pens', 0, 11),
(2, 548, 1, '', '', 'Serpentshrine Cavern', 0, 11),
(2, 550, 1, '', '', 'Tempest Keep', 0, 11),
(2, 552, 3, '', '', 'The Arcatraz', 0, 11),
(2, 553, 3, '', '', 'The Botanica', 0, 11),
(2, 554, 3, '', '', 'The Mechanar', 0, 11),
(2, 555, 3, '', '', 'Shadow Labyrinth', 0, 11),
(2, 556, 3, '', '', 'Sethekk Halls', 0, 11),
(2, 557, 3, '', '', 'Mana-Tombs', 0, 11),
(2, 558, 3, '', '', 'Auchenai Crypts', 0, 11),
(2, 560, 3, '', '', 'Old Hillsbrad Foothills', 0, 11),
(2, 564, 1, '', '', 'Black Temple', 0, 12),
(2, 565, 1, '', '', 'Gruul\'s Lair', 0, 11),
(2, 568, 1, '', '', 'Zul\'Aman', 0, 14),
(2, 574, 3, '', '', 'Utgarde Keep', 0, 16),
(2, 575, 3, '', '', 'Utgarde Pinnacle', 0, 16),
(2, 576, 3, '', '', 'The Nexus', 0, 16),
(2, 578, 3, '', '', 'The Oculus', 0, 16),
(2, 580, 1, '', '', 'Sunwell Plateau', 0, 15),
(2, 585, 3, '', '', 'Magister\'s Terrace', 0, 15),
(2, 595, 3, '', '', 'The Culling of Stratholme', 0, 16),
(2, 599, 3, '', '', 'Halls of Stone', 0, 16),
(2, 600, 3, '', '', 'Drak\'Tharon Keep', 0, 16),
(2, 601, 3, '', '', 'Azjol-Nerub', 0, 16),
(2, 602, 3, '', '', 'Halls of Lightning', 0, 16),
(2, 603, 3, '', '', 'Ulduar', 0, 17),
(2, 604, 3, '', '', 'Gundrak', 0, 16),
(2, 608, 3, '', '', 'Violet Hold', 0, 16),
(2, 615, 3, '', '', 'The Obsidian Sanctum', 0, 16),
(2, 616, 3, '', '', 'The Eye of Eternity', 0, 16),
(2, 619, 3, '', '', 'Ahn\'kahet: The Old Kingdom', 0, 16),
(2, 624, 3, '', '', 'Vault of Archavon', 0, 16),
(2, 631, 15, '', '', 'Icecrown Citadel', 0, 19),
(2, 632, 3, '', '', 'The Forge of Souls', 0, 19),
(2, 649, 15, '', '', 'Trial of The Crusader', 0, 18),
(2, 650, 3, '', '', 'Trial of the Champion', 0, 18),
(2, 658, 3, '', '', 'Pit of Saron', 0, 19),
(2, 668, 3, '', '', 'Halls of Reflection', 0, 19),
(2, 724, 15, '', '', 'The Ruby Sanctum', 0, 20),
(3, 1, 0, '', '', 'Alterac Valley', 0, 3),
(3, 2, 0, '', '', 'Warsong Gulch', 0, 3),
(3, 3, 0, '', '', 'Arathi Basin', 0, 5),
(3, 4, 0, '', '', 'Ring of Trials', 0, 11),
(3, 5, 0, '', '', 'Circle of Blood', 0, 11),
(3, 6, 0, '', '', 'All Arenas', 0, 11),
(3, 7, 0, '', '', 'Eye of the Storm', 0, 11),
(3, 8, 0, '', '', 'Ruins of Lordaeron', 0, 12),
(3, 9, 0, '', '', 'Strand of the Ancients', 0, 16),
(3, 10, 0, '', '', 'Dalaran Arena', 0, 16),
(3, 11, 0, '', '', 'Ring of Valor', 0, 16),
(3, 30, 0, '', '', 'Isle of Conquest', 0, 18),
(3, 32, 0, '', '', 'Random Battleground', 0, 19),
(5, 1, 0, '', '', 'Hellfire Peninsula', 0, 11),
(5, 2, 0, '', '', 'Nagrand', 0, 11),
(5, 3, 0, '', '', 'Terokkar Forest', 0, 11),
(5, 4, 0, '', '', 'Zangarmarsh', 0, 11),
(5, 5, 0, '', '', 'Silithus', 0, 10),
(5, 6, 0, '', '', 'Eastern Plaguelands', 0, 10),
(5, 7, 0, '', '', 'Grizzly Hills', 0, 16),
(9, 1, 0, '', '', 'Midsummer Fire Festival', 0, 9),
(9, 2, 0, '', '', 'Winter Veil', 0, 0),
(9, 3, 0, '', '', 'Darkmoon Faire (Terokkar Forest)', 0, 4),
(9, 4, 0, '', '', 'Darkmoon Faire (Elwynn Forest)', 0, 4),
(9, 5, 0, '', '', 'Darkmoon Faire (Mulgore)', 0, 4),
(9, 7, 0, '', '', 'Lunar Festival', 0, 7),
(9, 8, 0, '', '', 'Love is in the Air', 0, 7),
(9, 9, 0, '', '', 'Noblegarden', 0, 1),
(9, 10, 0, '', '', 'Children\'s Week', 0, 2),
(9, 11, 0, '', '', 'Harvest Festival', 0, 5),
(9, 12, 0, '', '', 'Hallow\'s End', 0, 6),
(9, 13, 0, '', '', 'Elemental Invasions', 0, 2),
(9, 14, 0, '', '', 'Stranglethorn Fishing Extravaganza Announce', 0, 5),
(9, 15, 0, '', '', 'Stranglethorn Fishing Extravaganza Fishing Pools', 0, 5),
(9, 16, 0, '', '', 'Gurubashi Arena Booty Run', 0, 0),
(9, 18, 0, '', '', 'Call to Arms: Alterac Valley!', 0, 5),
(9, 19, 0, '', '', 'Call to Arms: Warsong Gulch!', 0, 5),
(9, 20, 0, '', '', 'Call to Arms: Arathi Basin!', 0, 5),
(9, 21, 0, '', '', 'Call to Arms: Eye of the Storm!', 0, 11),
(9, 23, 0, '', '', 'Darkmoon Faire Building (Elwynn Forest, 0, XXX)', 0, 4),
(9, 24, 0, '', '', 'Brewfest', 0, 13),
(9, 26, 0, '', '', 'Pilgrim\'s Bounty', 0, 18),
(9, 34, 0, '', '', 'Brew of the Month October', 0, 16),
(9, 35, 0, '', '', 'Brew of the Month November', 0, 16),
(9, 36, 0, '', '', 'Brew of the Month December', 0, 16),
(9, 37, 0, '', '', 'Brew of the Month January', 0, 16),
(9, 38, 0, '', '', 'Brew of the Month February', 0, 16),
(9, 39, 0, '', '', 'Brew of the Month March', 0, 16),
(9, 40, 0, '', '', 'Brew of the Month April', 0, 16),
(9, 41, 0, '', '', 'Brew of the Month May', 0, 16),
(9, 42, 0, '', '', 'Brew of the Month June', 0, 16),
(9, 43, 0, '', '', 'Brew of the Month July', 0, 16),
(9, 44, 0, '', '', 'Brew of the Month August', 0, 16),
(9, 45, 0, '', '', 'Brew of the Month September', 0, 16),
(9, 50, 0, '', '', 'Pirates\' Day', 0, 15),
(9, 51, 0, '', '', 'Day of the Dead', 0, 18),
(9, 52, 0, '', '', 'Winter Veil: Gifts', 0, 0),
(9, 53, 0, '', '', 'Call to Arms: Strand of the Ancients!', 0, 16),
(9, 54, 0, '', '', 'Call to Arms: Isle of Conquest!', 0, 18),
(9, 55, 0, '', '', 'Arena Season 3', 0, 14),
(9, 56, 0, '', '', 'Arena Season 4', 0, 15),
(9, 57, 0, '', '', 'Arena Season 5', 0, 16),
(9, 58, 0, '', '', 'Arena Season 6', 0, 17),
(9, 59, 0, '', '', 'Arena Season 7', 0, 18),
(9, 60, 0, '', '', 'Arena Season 8', 0, 19),
(9, 61, 0, '', '', 'Zalazane\'s Fall', 0, 20),
(9, 62, 0, '', '', 'Stranglethorn Fishing Extravaganza - The Crew', 0, 5),
(9, 63, 0, '', '', 'Kalu\'ak Fishing Derby Turn-ins', 0, 19),
(9, 64, 0, '', '', 'Kalu\'ak Fishing Derby Fishing Pools', 0, 19),
(9, 70, 0, '', '', 'Brewfest Building (Iron Forge, 0, XXX)', 0, 13),
(9, 71, 0, '', '', 'Darkmoon Faire Building (Mulgore, 0, XXX)', 0, 4),
(9, 76, 0, '', '', 'Arena Season 2', 0, 12),
(9, 77, 0, '', '', 'Darkmoon Faire Building (Terokkar Forest, 0, XXX)', 0, 4),
(9, 90, 0, '', '', 'Stranglethorn Fishing Extravaganza - Turn-ins', 0, 5),
(9, 101, 0, '', '', 'Sun\'s Reach Reclamation Phase 1', 0, 15),
(9, 102, 0, '', '', 'Sun\'s Reach Reclamation Phase 2 Only', 0, 15),
(9, 103, 0, '', '', 'Sun\'s Reach Reclamation Phase 2 Permanent', 0, 15),
(9, 104, 0, '', '', 'Sun\'s Reach Reclamation Phase No Portal', 0, 15),
(9, 105, 0, '', '', 'Sun\'s Reach Reclamation Phase Portal', 0, 15),
(9, 106, 0, '', '', 'Sun\'s Reach Reclamation Phase 3 Only', 0, 15),
(9, 107, 0, '', '', 'Sun\'s Reach Reclamation Phase 3 Permanent', 0, 15),
(9, 108, 0, '', '', 'Sun\'s Reach Reclamation Phase No Anvil', 0, 15),
(9, 109, 0, '', '', 'Sun\'s Reach Reclamation Phase Anvil', 0, 15),
(9, 110, 0, '', '', 'Sun\'s Reach Reclamation Phase 4', 0, 15),
(9, 111, 0, '', '', 'Sun\'s Reach Reclamation Phase No Monument', 0, 15),
(9, 112, 0, '', '', 'Sun\'s Reach Reclamation Phase Monument', 0, 15),
(9, 113, 0, '', '', 'Sun\'s Reach Reclamation Phase No Alchemy Lab', 0, 15),
(9, 114, 0, '', '', 'Sun\'s Reach Reclamation Phase Alchemy Lab', 0, 15),
(9, 115, 0, '', '', 'Sun\'s Reach Reclamation Phase K\'iru', 0, 15);
