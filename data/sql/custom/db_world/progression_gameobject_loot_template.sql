DELIMITER $$
DROP PROCEDURE IF EXISTS AddColumn $$
CREATE PROCEDURE AddColumn()
BEGIN
    IF NOT EXISTS((SELECT * FROM information_schema.COLUMNS WHERE TABLE_SCHEMA=DATABASE() AND COLUMN_NAME='MinPatch' AND TABLE_NAME='gameobject_loot_template')) THEN
        ALTER TABLE `gameobject_loot_template`
            ADD COLUMN `MinPatch` INT UNSIGNED NOT NULL DEFAULT '0' AFTER `Comment`,
            ADD COLUMN `MaxPatch` INT UNSIGNED NOT NULL DEFAULT '21' AFTER `MinPatch`,
            DROP PRIMARY KEY,
            ADD PRIMARY KEY (`Entry`, `Item`, `MinPatch`, `MaxPatch`) USING BTREE;
    END IF;
END $$
CALL AddColumn()
$$
DELIMITER ;
DROP PROCEDURE IF EXISTS AddColumn;

DELETE FROM `gameobject_loot_template` WHERE `Entry` IN (26929, 26946, 26955, 26959, 26960, 26961, 26963, 26967, 26974, 27074, 27078, 27079, 27080, 27081, 27414, 27416, 27417) AND `Item` IN (45624, 47241);
DELETE FROM `gameobject_loot_template` WHERE `Entry` IN (25193, 26097, 26956, 26962, 27030, 27061, 27068, 27073, 27085, 27086) AND `Item` IN (40753, 45624, 47241);
DELETE FROM `gameobject_loot_template` WHERE `Entry` IN (24524, 24589, 25192, 26094, 26260) AND `Item` IN (40752, 45624, 47241);
DELETE FROM `gameobject_loot_template` WHERE `Item` IN (18646, 19803, 19805, 19806, 19807, 19808, 50289);
INSERT INTO `gameobject_loot_template` (`Entry`, `Item`, `Reference`, `Chance`, `QuestRequired`, `LootMode`, `GroupId`, `MinCount`, `MaxCount`, `Comment`, `MinPatch`, `MaxPatch`) VALUES
(16719, 18646, 0, 50, 0, 1, 1, 1, 1, NULL, 3, 21),
(17280, 19803, 0, 0.1, 0, 1, 1, 1, 1, 'School of Tastyfish - Brownell\'s Blue Striped Racer', 6, 21),
(17280, 19805, 0, 0.1, 0, 1, 1, 1, 1, 'School of Tastyfish - Keefer\'s Angelfish', 6, 21),
(17280, 19806, 0, 0.1, 0, 1, 1, 1, 1, 'School of Tastyfish - Dezian Queenfish', 6, 21),
(17280, 19807, 0, 75, 0, 1, 1, 1, 1, 'School of Tastyfish - Speckled Tastyfish', 6, 21),
(17280, 19808, 0, 0.05, 0, 1, 1, 1, 1, 'School of Tastyfish - Rockhide Strongfish', 6, 21),
(24524, 40752, 0, 100, 0, 1, 0, 1, 1, 'Cache of Eregos - Emblem of Heroism', 17, 18),
(24524, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Eregos - Emblem of Conquest', 19, 19),
(24524, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Eregos - Emblem of Triumph', 20, 21),
(24589, 40752, 0, 100, 0, 1, 0, 1, 1, 'Dark Runed Chest - Emblem of Heroism', 17, 18),
(24589, 45624, 0, 100, 0, 1, 0, 1, 1, 'Dark Runed Chest - Emblem of Conquest', 19, 19),
(24589, 47241, 0, 100, 0, 1, 0, 1, 1, 'Dark Runed Chest - Emblem of Triumph', 20, 21),
(25192, 40752, 0, 100, 0, 1, 0, 1, 1, 'Four Horsemen Chest - Emblem of Heroism', 17, 18),
(25192, 45624, 0, 100, 0, 1, 0, 1, 1, 'Four Horsemen Chest - Emblem of Conquest', 19, 19),
(25192, 47241, 0, 100, 0, 1, 0, 1, 1, 'Four Horsemen Chest - Emblem of Triumph', 20, 21),
(25193, 40753, 0, 100, 0, 1, 0, 1, 1, 'Four Horsemen Chest - Emblem of Valor', 17, 18),
(25193, 45624, 0, 100, 0, 1, 0, 1, 1, 'Four Horsemen Chest - Emblem of Conquest', 19, 19),
(25193, 47241, 0, 100, 0, 1, 0, 1, 1, 'Four Horsemen Chest - Emblem of Triumph', 20, 21),
(25662, 50289, 0, 0.05, 0, 1, 2, 1, 1, 'Glacial Salmon School - Blacktip Shark', 20, 21),
(25663, 50289, 0, 0.05, 0, 1, 2, 1, 1, 'Fangtooth Herring School - Blacktip Shark', 20, 21),
(25664, 50289, 0, 0.05, 0, 1, 2, 1, 1, 'Dragonfin Angelfish School - Blacktip Shark', 20, 21),
(25665, 50289, 0, 0.05, 0, 1, 2, 1, 1, 'Musselback Sculpin School - Blacktip Shark', 20, 21),
(25668, 50289, 0, 0.05, 0, 1, 2, 1, 1, 'Imperial Manta Ray School - Blacktip Shark', 20, 21),
(25669, 50289, 0, 0.05, 0, 1, 2, 1, 1, 'Borean Man O\' War School - Blacktip Shark', 20, 21),
(25670, 50289, 0, 0.05, 0, 1, 2, 1, 1, 'Moonglow Cuttlefish School - Blacktip Shark', 20, 21),
(25671, 50289, 0, 0.05, 0, 1, 2, 1, 1, 'Deep Sea Monsterbelly School - Blacktip Shark', 20, 21),
(25673, 50289, 0, 0.05, 0, 1, 2, 1, 1, 'Nettlefish School - Blacktip Shark', 20, 21),
(25674, 50289, 0, 0.05, 0, 1, 2, 1, 1, 'Glassfin Minnow School - Blacktip Shark', 20, 21),
(26094, 40752, 0, 100, 0, 1, 0, 2, 2, 'Alexstrasza\'s Gift - Emblem of Heroism', 17, 18),
(26094, 45624, 0, 100, 0, 1, 0, 2, 2, 'Alexstrasza\'s Gift - Emblem of Conquest', 19, 19),
(26094, 47241, 0, 100, 0, 1, 0, 2, 2, 'Alexstrasza\'s Gift - Emblem of Triumph', 20, 21),
(26097, 40753, 0, 100, 0, 1, 0, 2, 2, 'Alexstrasza\'s Gift - Emblem of Valor', 17, 18),
(26097, 45624, 0, 100, 0, 1, 0, 2, 2, 'Alexstrasza\'s Gift - Emblem of Conquest', 19, 19),
(26097, 47241, 0, 100, 0, 1, 0, 2, 2, 'Alexstrasza\'s Gift - Emblem of Triumph', 20, 21),
(26260, 40752, 0, 100, 0, 1, 0, 1, 1, 'Tribunal Chest - Emblem of Heroism', 17, 18),
(26260, 45624, 0, 100, 0, 1, 0, 1, 1, 'Tribunal Chest - Emblem of Conquest', 19, 19),
(26260, 47241, 0, 100, 0, 1, 0, 1, 1, 'Tribunal Chest - Emblem of Triumph', 20, 21),
(26929, 45624, 0, 100, 0, 1, 0, 1, 2, 'Cache of Living Stone - Emblem of Conquest', 18, 19),
(26929, 47241, 0, 100, 0, 1, 0, 1, 2, 'Cache of Living Stone - Emblem of Triumph', 20, 21),
(26946, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Winter - Emblem of Conquest', 18, 19),
(26946, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Winter - Emblem of Triumph', 20, 21),
(26955, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Storms - Emblem of Conquest', 18, 19),
(26955, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Storms - Emblem of Triumph', 20, 21),
(26956, 40753, 0, 100, 0, 1, 0, 1, 1, 'Cache of Storms - Emblem of Valor', 18, 18),
(26956, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Storms - Emblem of Conquest', 19, 19),
(26956, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Storms - Emblem of Triumph', 20, 21),
(26959, 45624, 0, 100, 0, 1, 0, 2, 2, 'Freya\'s Gift - Emblem of Conquest', 18, 19),
(26959, 47241, 0, 100, 0, 1, 0, 2, 2, 'Freya\'s Gift - Emblem of Triumph', 20, 21),
(26960, 45624, 0, 100, 0, 1, 0, 2, 2, 'Freya\'s Gift - Emblem of Conquest', 18, 19),
(26960, 47241, 0, 100, 0, 1, 0, 2, 2, 'Freya\'s Gift - Emblem of Triumph', 20, 21),
(26961, 45624, 0, 100, 0, 1, 0, 1, 1, 'Freya\'s Gift - Emblem of Conquest', 18, 19),
(26961, 47241, 0, 100, 0, 1, 0, 1, 1, 'Freya\'s Gift - Emblem of Triumph', 20, 21),
(26962, 40753, 0, 100, 0, 1, 0, 1, 1, 'Freya\'s Gift - Emblem of Valor', 18, 18),
(26962, 45624, 0, 100, 0, 1, 0, 1, 1, 'Freya\'s Gift - Emblem of Conquest', 19, 19),
(26962, 47241, 0, 100, 0, 1, 0, 1, 1, 'Freya\'s Gift - Emblem of Triumph', 20, 21),
(26963, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Innovation - Emblem of Conquest', 18, 19),
(26963, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Innovation - Emblem of Triumph', 20, 21),
(26967, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Innovation - Emblem of Conquest', 18, 19),
(26967, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Innovation - Emblem of Triumph', 20, 21),
(26974, 45624, 0, 100, 0, 1, 0, 2, 2, 'Gift of the Observer - Emblem of Conquest', 18, 19),
(26974, 47241, 0, 100, 0, 1, 0, 2, 2, 'Gift of the Observer - Emblem of Triumph', 20, 21),
(27030, 40753, 0, 100, 0, 1, 0, 1, 1, 'Gift of the Observer - Emblem of Valor', 18, 18),
(27030, 45624, 0, 100, 0, 1, 0, 1, 1, 'Gift of the Observer - Emblem of Conquest', 19, 19),
(27030, 47241, 0, 100, 0, 1, 0, 1, 1, 'Gift of the Observer - Emblem of Triumph', 20, 21),
(27061, 40753, 0, 100, 0, 1, 0, 1, 1, 'Cache of Living Stone - Emblem of Valor', 18, 18),
(27061, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Living Stone - Emblem of Conquest', 19, 19),
(27061, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Living Stone - Emblem of Triumph', 20, 21),
(27068, 40753, 0, 100, 0, 1, 0, 1, 1, 'Cache of Winter - Emblem of Valor', 18, 18),
(27068, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Winter - Emblem of Conquest', 19, 19),
(27068, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Winter - Emblem of Triumph', 20, 21),
(27073, 40753, 0, 100, 0, 1, 0, 1, 1, 'Cache of Storms - Emblem of Valor', 18, 18),
(27073, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Storms - Emblem of Conquest', 19, 19),
(27073, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Storms - Emblem of Triumph', 20, 21),
(27074, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Storms - Emblem of Conquest', 18, 19),
(27074, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Storms - Emblem of Triumph', 20, 21),
(27078, 45624, 0, 100, 0, 1, 0, 3, 3, 'Freya\'s Gift - Emblem of Conquest', 18, 19),
(27078, 47241, 0, 100, 0, 1, 0, 3, 3, 'Freya\'s Gift - Emblem of Triumph', 20, 21),
(27079, 45624, 0, 100, 0, 1, 0, 3, 3, 'Freya\'s Gift - Emblem of Conquest', 18, 19),
(27079, 47241, 0, 100, 0, 1, 0, 3, 3, 'Freya\'s Gift - Emblem of Triumph', 20, 21),
(27080, 45624, 0, 100, 0, 1, 0, 3, 3, 'Freya\'s Gift - Emblem of Conquest', 18, 19),
(27080, 47241, 0, 100, 0, 1, 0, 3, 3, 'Freya\'s Gift - Emblem of Triumph', 20, 21),
(27081, 45624, 0, 100, 0, 1, 0, 3, 3, 'Freya\'s Gift - Emblem of Conquest', 18, 19),
(27081, 47241, 0, 100, 0, 1, 0, 3, 3, 'Freya\'s Gift - Emblem of Triumph', 20, 21),
(27085, 40753, 0, 100, 0, 1, 0, 1, 1, 'Cache of Innovation - Emblem of Valor', 18, 18),
(27085, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Innovation - Emblem of Conquest', 19, 19),
(27085, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Innovation - Emblem of Triumph', 20, 21),
(27086, 40753, 0, 100, 0, 1, 0, 1, 1, 'Cache of Innovation - Emblem of Valor', 18, 18),
(27086, 45624, 0, 100, 0, 1, 0, 1, 1, 'Cache of Innovation - Emblem of Conquest', 19, 19),
(27086, 47241, 0, 100, 0, 1, 0, 1, 1, 'Cache of Innovation - Emblem of Triumph', 20, 21),
(27414, 45624, 0, 100, 0, 1, 0, 1, 1, 'Champion\'s Cache - Emblem of Conquest', 19, 19),
(27414, 47241, 0, 100, 0, 1, 0, 1, 1, 'Champion\'s Cache - Emblem of Triumph', 20, 21),
(27416, 45624, 0, 100, 0, 1, 0, 1, 1, 'Eadric\'s Cache - Emblem of Conquest', 19, 19),
(27416, 47241, 0, 100, 0, 1, 0, 1, 1, 'Eadric\'s Cache - Emblem of Triumph', 20, 21),
(27417, 45624, 0, 100, 0, 1, 0, 1, 1, 'Confessor\'s Cache - Emblem of Conquest', 19, 19),
(27417, 47241, 0, 100, 0, 1, 0, 1, 1, 'Confessor\'s Cache - Emblem of Triumph', 20, 21);
