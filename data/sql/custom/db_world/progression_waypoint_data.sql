DELIMITER $$
DROP PROCEDURE IF EXISTS AddColumn $$
CREATE PROCEDURE AddColumn()
BEGIN
    IF NOT EXISTS((SELECT * FROM information_schema.COLUMNS WHERE TABLE_SCHEMA=DATABASE() AND COLUMN_NAME='MinPatch' AND TABLE_NAME='waypoint_data')) THEN
        ALTER TABLE `waypoint_data`
            ADD COLUMN `MinPatch` INT UNSIGNED NOT NULL DEFAULT '0' AFTER `wpguid`,
            ADD COLUMN `MaxPatch` INT UNSIGNED NOT NULL DEFAULT '21' AFTER `MinPatch`,
            DROP PRIMARY KEY,
            ADD PRIMARY KEY (`id`, `point`, `MinPatch`, `MaxPatch`) USING BTREE;
    END IF;
END $$
CALL AddColumn()
$$
DELIMITER ;
DROP PROCEDURE IF EXISTS AddColumn;

DELETE FROM `waypoint_data` WHERE `id` IN (1239700, 5300002);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`, `MinPatch`, `MaxPatch`) VALUES
(1239700, 1, -12241.3, -2432.1, 2.93936, NULL, 0, 0, 0, 100, 0, 2, 11),
(1239700, 2, -12271.6, -2453.36, 3.84158, NULL, 0, 0, 0, 100, 0, 2, 11),
(1239700, 3, -12279.2, -2488.66, 4.38164, NULL, 0, 0, 0, 100, 0, 2, 11),
(1239700, 4, -12275.1, -2520.88, 3.67985, NULL, 0, 0, 0, 100, 0, 2, 11),
(1239700, 5, -12224.9, -2522.83, 1.56836, NULL, 0, 0, 0, 100, 0, 2, 11),
(1239700, 6, -12191.6, -2502.13, -0.148134, NULL, 0, 0, 0, 100, 0, 2, 11),
(1239700, 7, -12114.8, -2510.99, 3.11959, NULL, 0, 0, 0, 100, 0, 2, 11),
(1239700, 8, -12138.4, -2494.16, 3.89333, NULL, 0, 0, 0, 100, 0, 2, 11),
(1239700, 9, -12166, -2478.6, 0.810272, NULL, 0, 0, 0, 100, 0, 2, 11),
(1239700, 10, -12171.4, -2452.79, -0.15142, NULL, 0, 0, 0, 100, 0, 2, 11),
(1239700, 11, -12208, -2436.73, 0.09382, NULL, 0, 0, 0, 100, 0, 2, 11),
(5300002, 0, 2325.58, -5372.62, 85.9003, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 1, 2332.74, -5363.57, 84.2833, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 2, 2336.79, -5351.36, 83.5329, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 3, 2336.64, -5335.93, 81.9967, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 4, 2340.08, -5322.29, 81.9967, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 5, 2336.97, -5309.26, 82.4515, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 6, 2331.07, -5302.28, 81.9452, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 7, 2319.73, -5295.7, 81.9971, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 8, 2315.1, -5288.91, 82.044, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 9, 2308.43, -5283.82, 81.885, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 10, 2300.3, -5285.85, 81.9248, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 11, 2293.85, -5292.41, 81.9969, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 12, 2298.22, -5299.82, 81.9969, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 13, 2307.86, -5299.92, 81.997, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 14, 2315.56, -5296.7, 81.9969, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 15, 2323.68, -5301.18, 82.007, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 16, 2332.16, -5305.42, 81.9953, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 17, 2333.2, -5315.11, 81.9953, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 18, 2333.42, -5325.64, 81.9953, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 19, 2332.21, -5336.57, 81.9953, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 20, 2330.14, -5346.45, 84.7449, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 21, 2328.36, -5357, 85.1194, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 22, 2325.68, -5363.49, 86.23, NULL, 0, 0, 0, 100, 0, 0, 9),
(5300002, 23, 2318.86, -5369.25, 87.2393, NULL, 10000, 0, 0, 100, 0, 0, 9);
