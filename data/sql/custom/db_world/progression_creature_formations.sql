DELIMITER $$
DROP PROCEDURE IF EXISTS AddColumn $$
CREATE PROCEDURE AddColumn()
BEGIN
    IF NOT EXISTS((SELECT * FROM information_schema.COLUMNS WHERE TABLE_SCHEMA=DATABASE() AND COLUMN_NAME='MinPatch' AND TABLE_NAME='creature_formations')) THEN
        ALTER TABLE `creature_formations`
            ADD COLUMN `MinPatch` INT UNSIGNED NOT NULL DEFAULT '0' AFTER `point_2`,
            ADD COLUMN `MaxPatch` INT UNSIGNED NOT NULL DEFAULT '21' AFTER `MinPatch`,
            DROP PRIMARY KEY,
            ADD PRIMARY KEY (`memberGUID`, `MinPatch`, `MaxPatch`) USING BTREE;
    END IF;
END $$
CALL AddColumn()
$$
DELIMITER ;
DROP PROCEDURE IF EXISTS AddColumn;

DELETE FROM `creature_formations` WHERE `leaderGUID` IN (88777, 92903, 246905, 246915, 5300002);
DELETE FROM `creature_formations` WHERE `leaderGUID` IN (5800003, 5800007, 5800009, 5800011, 5800013, 5800015, 5800017, 5800020, 5800023, 5800024, 5800030, 5800033, 5800035, 5800038, 5800041, 5800043, 5800046, 5800051, 5800053, 5800055, 5800059, 5800061, 5800065, 5800068, 5800072, 5800078, 5800081, 5800085, 5800087, 5800090, 5800092, 5800096, 5800100, 5800103, 5800107, 5800109, 5800118, 5800121, 5800124, 5800126, 5800128, 5800130, 5800132, 5800135, 5800141, 5800143, 5800148, 5800152, 5800155, 5800158, 5800160, 5800162, 5800164, 5800166);
INSERT INTO `creature_formations` (`leaderGUID`, `memberGUID`, `dist`, `angle`, `groupAI`, `point_1`, `point_2`, `MinPatch`, `MaxPatch`) VALUES
(88777, 88777, 0, 0, 2, 0, 0, 20, 21),
(88777, 88778, 3, 90, 514, 0, 0, 20, 21),
(92903, 92903, 0, 0, 2, 0, 0, 4, 21),
(92903, 92904, 2, 300, 514, 0, 0, 4, 21),
(246905, 246900, 0, 0, 5, 0, 0, 20, 21),
(246905, 246901, 0, 0, 5, 0, 0, 20, 21),
(246905, 246902, 0, 0, 5, 0, 0, 20, 21),
(246905, 246904, 0, 0, 5, 0, 0, 20, 21),
(246905, 246905, 0, 0, 5, 0, 0, 20, 21),
(246905, 246906, 0, 0, 5, 0, 0, 20, 21),
(246905, 246907, 0, 0, 5, 0, 0, 20, 21),
(246915, 246910, 0, 0, 5, 0, 0, 20, 21),
(246915, 246911, 0, 0, 5, 0, 0, 20, 21),
(246915, 246912, 0, 0, 5, 0, 0, 20, 21),
(246915, 246913, 0, 0, 5, 0, 0, 20, 21),
(246915, 246914, 0, 0, 5, 0, 0, 20, 21),
(246915, 246915, 0, 0, 5, 0, 0, 20, 21),
(5300002, 5300002, 0, 0, 2, 0, 0, 0, 9),
(5300002, 5300003, 3, 90, 513, 0, 0, 0, 9),
(5800003, 5800003, 0, 0, 3, 0, 0, 0, 21),
(5800003, 5800004, 2, 90, 515, 0, 0, 0, 21),
(5800007, 5800007, 0, 0, 3, 0, 0, 0, 21),
(5800007, 5800008, 0, 0, 3, 0, 0, 0, 21),
(5800009, 5800009, 0, 0, 3, 0, 0, 0, 21),
(5800009, 5800010, 0, 0, 3, 0, 0, 0, 21),
(5800011, 5800011, 0, 0, 3, 0, 0, 0, 21),
(5800011, 5800012, 2, 90, 515, 0, 0, 0, 21),
(5800013, 5800013, 0, 0, 3, 0, 0, 0, 21),
(5800013, 5800014, 2, 90, 515, 0, 0, 0, 21),
(5800015, 5800015, 0, 0, 3, 0, 0, 0, 21),
(5800015, 5800016, 2, 90, 515, 0, 0, 0, 21),
(5800017, 5800017, 0, 0, 3, 0, 0, 0, 21),
(5800017, 5800018, 2, 90, 515, 0, 0, 0, 21),
(5800020, 5800019, 0, 0, 3, 0, 0, 0, 21),
(5800020, 5800020, 0, 0, 3, 0, 0, 0, 21),
(5800020, 5800021, 0, 0, 3, 0, 0, 0, 21),
(5800020, 5800022, 0, 0, 3, 0, 0, 0, 21),
(5800023, 5800023, 0, 0, 3, 0, 0, 0, 21),
(5800024, 5800024, 0, 0, 3, 0, 0, 0, 21),
(5800023, 5800025, 2, 90, 515, 0, 0, 0, 21),
(5800023, 5800026, 2, 270, 515, 0, 0, 0, 21),
(5800024, 5800027, 2, 270, 515, 0, 0, 0, 21),
(5800024, 5800028, 2, 90, 515, 0, 0, 0, 21),
(5800030, 5800029, 0, 0, 3, 0, 0, 0, 21),
(5800030, 5800030, 0, 0, 3, 0, 0, 0, 21),
(5800030, 5800031, 0, 0, 3, 0, 0, 0, 21),
(5800030, 5800032, 0, 0, 3, 0, 0, 0, 21),
(5800033, 5800033, 0, 0, 3, 0, 0, 0, 21),
(5800033, 5800034, 2, 90, 515, 0, 0, 0, 21),
(5800035, 5800035, 0, 0, 3, 0, 0, 0, 21),
(5800035, 5800036, 2, 225, 515, 0, 0, 0, 21),
(5800035, 5800037, 2, 135, 515, 0, 0, 0, 21),
(5800038, 5800038, 0, 0, 3, 0, 0, 0, 21),
(5800038, 5800039, 2, 90, 515, 0, 0, 0, 21),
(5800041, 5800041, 0, 0, 3, 0, 0, 0, 9),
(5800041, 5800042, 0, 0, 3, 0, 0, 0, 9),
(5800043, 5800043, 0, 0, 3, 0, 0, 0, 21),
(5800043, 5800044, 0, 0, 3, 0, 0, 0, 21),
(5800046, 5800046, 0, 0, 3, 0, 0, 0, 21),
(5800046, 5800047, 2, 90, 515, 0, 0, 0, 21),
(5800051, 5800051, 0, 0, 3, 0, 0, 0, 21),
(5800051, 5800052, 0, 0, 3, 0, 0, 0, 21),
(5800053, 5800053, 0, 0, 3, 0, 0, 0, 21),
(5800053, 5800054, 0, 0, 3, 0, 0, 0, 21),
(5800055, 5800055, 0, 0, 3, 0, 0, 0, 21),
(5800055, 5800056, 0, 0, 3, 0, 0, 0, 21),
(5800059, 5800059, 0, 0, 3, 0, 0, 0, 9),
(5800059, 5800060, 2, 90, 515, 0, 0, 0, 9),
(5800061, 5800061, 0, 0, 3, 0, 0, 0, 9),
(5800061, 5800062, 2, 225, 515, 0, 0, 0, 9),
(5800061, 5800063, 2, 135, 515, 0, 0, 0, 9),
(5800065, 5800065, 0, 0, 3, 0, 0, 0, 9),
(5800065, 5800066, 2, 90, 515, 0, 0, 0, 9),
(5800068, 5800068, 0, 0, 3, 0, 0, 0, 9),
(5800068, 5800069, 2, 90, 515, 0, 0, 0, 9),
(5800072, 5800072, 0, 0, 3, 0, 0, 0, 9),
(5800072, 5800073, 0, 0, 3, 0, 0, 0, 9),
(5800078, 5800078, 0, 0, 3, 0, 0, 0, 21),
(5800078, 5800079, 0, 0, 3, 0, 0, 0, 21),
(5800081, 5800081, 0, 0, 3, 0, 0, 0, 21),
(5800081, 5800082, 0, 0, 3, 0, 0, 0, 21),
(5800081, 5800083, 0, 0, 3, 0, 0, 0, 21),
(5800081, 5800084, 0, 0, 3, 0, 0, 0, 21),
(5800085, 5800085, 0, 0, 3, 0, 0, 0, 21),
(5800085, 5800086, 0, 0, 3, 0, 0, 0, 21),
(5800087, 5800087, 0, 0, 3, 0, 0, 0, 21),
(5800087, 5800088, 0, 0, 3, 0, 0, 0, 21),
(5800090, 5800090, 0, 0, 3, 0, 0, 0, 21),
(5800090, 5800091, 0, 0, 3, 0, 0, 0, 21),
(5800092, 5800092, 0, 0, 3, 0, 0, 0, 21),
(5800092, 5800093, 0, 0, 3, 0, 0, 0, 21),
(5800096, 5800096, 0, 0, 3, 0, 0, 0, 21),
(5800096, 5800097, 0, 0, 3, 0, 0, 0, 21),
(5800096, 5800098, 0, 0, 3, 0, 0, 0, 21),
(5800096, 5800099, 0, 0, 3, 0, 0, 0, 21),
(5800100, 5800100, 0, 0, 3, 0, 0, 0, 21),
(5800100, 5800101, 2, 90, 515, 0, 0, 0, 21),
(5800100, 5800102, 2, 270, 515, 0, 0, 0, 21),
(5800103, 5800103, 0, 0, 3, 0, 0, 0, 21),
(5800103, 5800104, 2, 90, 515, 0, 0, 0, 21),
(5800103, 5800105, 2, 270, 515, 0, 0, 0, 21),
(5800107, 5800107, 0, 0, 3, 0, 0, 0, 9),
(5800107, 5800108, 0, 0, 3, 0, 0, 0, 9),
(5800109, 5800109, 0, 0, 3, 0, 0, 0, 21),
(5800109, 5800110, 2, 90, 515, 0, 0, 0, 21),
(5800118, 5800118, 0, 0, 3, 0, 0, 0, 21),
(5800118, 5800119, 2, 135, 515, 0, 0, 0, 21),
(5800118, 5800120, 2, 225, 515, 0, 0, 0, 21),
(5800121, 5800121, 0, 0, 3, 0, 0, 0, 21),
(5800121, 5800122, 2, 90, 515, 0, 0, 0, 21),
(5800124, 5800124, 0, 0, 3, 0, 0, 0, 21),
(5800124, 5800125, 2, 90, 515, 0, 0, 0, 21),
(5800126, 5800126, 0, 0, 3, 0, 0, 0, 21),
(5800126, 5800127, 2, 90, 515, 0, 0, 0, 21),
(5800128, 5800128, 0, 0, 3, 0, 0, 0, 21),
(5800128, 5800129, 2, 90, 515, 0, 0, 0, 21),
(5800130, 5800130, 0, 0, 3, 0, 0, 0, 21),
(5800130, 5800131, 2, 90, 515, 0, 0, 0, 21),
(5800132, 5800132, 0, 0, 3, 0, 0, 0, 21),
(5800132, 5800133, 2, 135, 515, 0, 0, 0, 21),
(5800132, 5800134, 2, 225, 515, 0, 0, 0, 21),
(5800135, 5800135, 0, 0, 3, 0, 0, 0, 21),
(5800135, 5800136, 2, 135, 515, 0, 0, 0, 21),
(5800135, 5800137, 2, 225, 515, 0, 0, 0, 21),
(5800141, 5800141, 0, 0, 3, 0, 0, 0, 14),
(5800141, 5800142, 0, 0, 3, 0, 0, 0, 14),
(5800143, 5800143, 0, 0, 3, 0, 0, 0, 9),
(5800143, 5800144, 0, 0, 3, 0, 0, 0, 9),
(5800143, 5800145, 0, 0, 3, 0, 0, 0, 9),
(5800143, 5800146, 0, 0, 3, 0, 0, 0, 9),
(5800148, 5800148, 0, 0, 3, 0, 0, 0, 9),
(5800148, 5800149, 2, 135, 515, 0, 0, 0, 9),
(5800148, 5800150, 2, 225, 515, 0, 0, 0, 9),
(5800152, 5800152, 0, 0, 3, 0, 0, 0, 9),
(5800152, 5800153, 2, 135, 515, 0, 0, 0, 9),
(5800152, 5800154, 2, 225, 515, 0, 0, 0, 9),
(5800155, 5800155, 0, 0, 3, 0, 0, 0, 9),
(5800155, 5800156, 2, 90, 515, 0, 0, 0, 9),
(5800155, 5800157, 2, 270, 515, 0, 0, 0, 9),
(5800158, 5800158, 0, 0, 3, 0, 0, 0, 9),
(5800158, 5800159, 2, 90, 515, 0, 0, 0, 9),
(5800160, 5800160, 0, 0, 3, 0, 0, 0, 9),
(5800160, 5800161, 2, 90, 515, 0, 0, 0, 9),
(5800162, 5800162, 0, 0, 3, 0, 0, 0, 9),
(5800162, 5800163, 2, 90, 515, 0, 0, 0, 9),
(5800164, 5800164, 0, 0, 3, 0, 0, 0, 9),
(5800164, 5800165, 2, 90, 515, 0, 0, 0, 9),
(5800166, 5800166, 0, 0, 3, 0, 0, 0, 9),
(5800166, 5800167, 2, 90, 515, 0, 0, 0, 9);
